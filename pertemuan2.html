<!DOCTYPE html>
<html>
<head>
    <title>INFO CUACA</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <style>
        body {
            font-family: sans-serif;
            margin: 20px;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        h2 {
            text-align: center;
            border-bottom: 1px solid #ccc;
            padding-bottom: 10px;
        }
        .container {
            margin-top: 15px;
            padding: 10px;
            border: 1px solid #eee;
        }
        input[type="text"] {
            padding: 5px;
            width: 60%;
            margin-right: 5px;
        }
        button {
            padding: 5px 10px;
            cursor: pointer;
        }
        .info-detail {
            margin: 5px 0;
        }
        .info-detail strong {
            display: inline-block;
            width: 100px;
        }
    </style>
</head>
<body>

    <h2>INFO CUACA</h2>

    <div class="container input-section">
        <label for="lokasiInput">Lokasi : </label>
        <input type="text" id="lokasiInput" placeholder="Masukkan nama kota/lokasi">
        <button id="getButton">GET</button>
    </div>

    <div class="container output-section">
        <p class="info-detail"><strong>Negara:</strong> <span id="negara">-</span></p>
        <p class="info-detail"><strong>Provinsi:</strong> <span id="provinsi">-</span></p>
        <br>
        <p class="info-detail"><strong>Suhu:</strong> <span id="suhu">-</span></p>
        <p class="info-detail"><strong>Kelembaban:</strong> <span id="kelembaban">-</span></p>
        <br>
        <p class="info-detail"><strong>Lokasi:</strong> <span id="namaLokasi">-</span></p>
        <p class="info-detail"><strong>Latitude:</strong> <span id="lat">-</span></p>
        <p class="info-detail"><strong>Longitude:</strong> <span id="lon">-</span></p>
    </div>

<script>
        const API_KEY = "9ee3720d2fa24bdda5c12227250610";

        document.getElementById('getButton').addEventListener('click', function() {
            const kota = document.getElementById('lokasiInput').value.trim();
            
            function resetOutput() {
                document.getElementById('negara').innerText = '-';
                document.getElementById('provinsi').innerText = '-';
                document.getElementById('suhu').innerText = '-';
                document.getElementById('kelembaban').innerText = '-';
                document.getElementById('namaLokasi').innerText = '-';
                document.getElementById('lat').innerText = '-';
                document.getElementById('lon').innerText = '-';
            }

            if (!kota) {
                alert("Masukkan nama lokasi terlebih dahulu.");
                return;
            }
            
            resetOutput();

            const urlapi = `http://api.weatherapi.com/v1/current.json?key=${API_KEY}&q=${kota}&aqi=no`;

            $.ajax({
                url: urlapi,
                method: 'GET',
                success: function(data) {
                    document.getElementById('negara').innerText = data.location.country;
                    document.getElementById('provinsi').innerText = data.location.region || '-';
                    document.getElementById('suhu').innerText = `${data.current.temp_c}Â°C`; 
                    document.getElementById('kelembaban').innerText = `${data.current.humidity}%`;
                    document.getElementById('namaLokasi').innerText = data.location.name;
                    document.getElementById('lat').innerText = `${data.location.lat}`;
                    document.getElementById('lon').innerText = `${data.location.lon}`;
                },
                error: function(xhr, status, error) { 
                    console.error("Gagal mengambil data:", status, error);
                    alert("Gagal mengambil data cuaca. Pastikan nama lokasi benar.");
                    resetOutput();
                }
            });
        });
    </script>

</body>
</html>